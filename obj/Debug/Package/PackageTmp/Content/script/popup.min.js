var delim=",";function openSortWindow(a,b,c){$("#"+b).css("left",$(a).position().left);$("#"+b).css("top",$(a).position().top+20);$("#"+b).show();$("#"+b+" div.header").html(c)}function closeSortWindow(a){$("#"+a).hide()}function up(a){var a=$("#"+a+" option:selected"),b=a.prev("option");$(b).text()!=""&&($(a).remove(),$(b).before($(a)))}function down(a){var a=$("#"+a+" option:selected"),b=a.next("option");$(b).text()!=""&&($(a).remove(),$(b).after($(a)))}
function save(a,b,c,d){switch(c){case "tab":saveTabs(a,b);break;case "section":saveSections(d,a,b);break;case "link":saveLinks(d,a,b)}}function saveTabs(a,b){var c=getOrder(a,delim);$.ajax({url:"/Admin/Tab/SaveTabOrder/",data:{order:c,delim:delim},dataType:"json",success:function(a){a.Success?(closeSortWindow(b),reload()):alert(a.Error)}})}
function saveSections(a,b,c){b=getOrder(b,delim);$.ajax({url:"/Admin/Section/SaveSectionOrder/",data:{tabId:a,order:b,delim:delim},dataType:"json",success:function(a){a.Success?(closeSortWindow(c),reload()):alert(a.Error)}})}function saveLinks(a,b,c){b=getOrder(b,delim);$.ajax({url:"/Admin/Link/SaveLinkOrder/",data:{sectionId:a,order:b,delim:delim},dataType:"json",success:function(a){a.Success?(closeSortWindow(c),reload()):alert(a.Error)}})}
function getOrder(a,b){var c="";$("#"+a+" option").each(function(){c+=b+$(this).val()});return c=c.length>=1?c.substr(1):c};