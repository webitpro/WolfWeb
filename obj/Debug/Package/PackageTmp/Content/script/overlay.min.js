function getDomain(){var a=location.href.split("/");return a[0]+"//"+a[2]}function center(c,b){var a=(($(window).height()-$("#"+c).outerHeight())/2)+$(window).scrollTop();a=((a<0)?30:a);var e=a+"px";var d=(($(window).width()-$("#"+c).outerWidth())/2)+$(window).scrollLeft()+"px";$("#"+c).css({top:e,left:d});b()}function getCenter(b){var a=(($(window).height()-$("#"+b).outerHeight())/2)+$(window).scrollTop();a=((a<0)?30:a);var d=a+"px";var c=(($(window).width()-$("#"+b).outerWidth())/2)+$(window).scrollLeft()+"px";return[d,c]}function getLeftX(b){var a=0;switch(b){case"Image":a=$("#overlay").outerWidth()-($("#overlay div.x").width()-5);break;case"Video":a=$("#overlay").outerWidth()-($("#overlay div.x").width()-5);break;case"PDF":a=$("#overlay").outerWidth()-($("#overlay div.x").width()-7);break;case"Link":a=$("#overlay").outerWidth()-($("#overlay div.x").width()-5);break}return a}function calculateX(b,a){switch(b){case"Image":$("#overlay div.x").css({top:"-50px"}).hide();$("#overlay div.x").css({left:getLeftX("Image")+"px"});break;case"Video":$("#overlay div.x").css({top:"-53px"}).hide();$("#overlay div.x").css({left:getLeftX("Video")+"px"});break;case"PDF":$("#overlay div.x").css({top:"-31px"}).hide();$("#overlay div.x").css({left:getLeftX("PDF")+"px"});break;case"Link":$("#overlay div.x").css({top:"-25px"}).hide();$("#overlay div.x").css({left:getLeftX("Link")+"px"});break}$("#overlay div.x").fadeTo(10,1,function(){$(this).show("fast",function(){a()})})}function overlay(a,d,b){if(a){$("#gradient").fadeTo(250,0.65,function(){document.getElementById("gradient").style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=65)";$("#overlay").fadeTo(10,0.001,function(){if($("#data").html().length>0){center("overlay",function(){$("#overlay").fadeTo(250,1,function(){calculateX(d,function(){$("#overlay").show(0,function(){$("#gradient").show(0,function(){if(b){b()}})})})})})}else{center("overlay",function(){$("#overlay").fadeTo(250,1,function(){calculateX(d,function(){$("#overlay").show(0,function(){$("#gradient").show(0,function(){if(b){b()}})})})})})}})})}else{$("#data").html("");try{document.getElementById("videoOverlay").stop()}catch(c){}$("#overlay").fadeTo(250,0,function(){$("#overlay").hide(0,function(){$("#gradient").fadeTo(250,0,function(){$("#gradient").hide(0,function(){$("#overlay div.x").fadeTo(10,0,function(){$("#overlay div.x").hide(0,function(){if(b){b()}})})})})})})}}function sidebarAction(i,h,e,b){var c=$("#overlay .container #data");c.html("");switch(i){case"Image":c.html('<img src="'+h+'" alt="" />');if(e==1){callOverlay(i,function(){if(b){b()}})}break;case"Video":c.html('<div id="flash"></div>');var d={path:""};var g={wmode:"transparent"};var a={id:"videoOverlay"};var f='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="854" height="480" align="middle" id="videoOverlay"><param name="movie" value="/Content/flash/vid.swf?path='+h+'"/><param name="wmode" value="transparent" /><!--[if !IE]>--><object type="application/x-shockwave-flash" data="/Content/flash/vid.swf?path='+h+'" width="854" height="480"><param name="movie" value="/Content/flash/vid.swf"/><param name="wmode" value="transparent" /><!--<![endif]--><a href="http://www.adobe.com/go/getflash"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player"/></a><!--[if !IE]>--></object><!--<![endif]--></object>';$("#flash").html(f);if(e==1){callOverlay(i,function(){if(b){b()}})}break;case"PDF":callPDFIFrame(c,getDomain()+h,function(){callOverlay(i,function(){if(b){b()}})});break;case"Link":if(e==1){callIFrame(c,h,function(){setIFrameSize(function(){callOverlay(i,function(){if(b){b()}})})})}else{if(h.substr(0,4)=="http"){e=2}if(e==2){window.open(h,"")}else{location.href=h}}break}}function callOverlay(b,a){overlay(true,b,function(){if(a){a()}})}function setIFrameSize(a){var c=$("#data iframe:first").contents().find("head").children("style").html();var d=c.split(";")[0].split(":")[1];var b=c.split(";")[1].split(":")[1];d=parseInt(d.substr(0,d.length-2))+3;b=parseInt(b.substr(0,b.length-2))+2;$("#data iframe:first").attr("width",d+"px;").attr("height",b+"px;");a()}function callIFrame(b,c,a){b.append('<iframe class="linkIFrame" src=""></iframe>');b.children(".linkIFrame").attr("src",c);b.children(".linkIFrame").load(function(){a(this)})}function callPDFIFrame(b,c,a){b.html('<iframe class="pdf" src=""></iframe>');b.children(".pdf").attr("src",c+"#view=FitV&scrollbar=0&navpanes=0&toolbar=0");a(this)};